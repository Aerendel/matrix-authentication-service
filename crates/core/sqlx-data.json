{
  "db": "PostgreSQL",
  "037ba804eabd0b4290d87d1de37054f358eb11397d3a8e4b69a81cdce0a178e0": {
    "query": "\n            SELECT id, username\n            FROM users\n            WHERE username = $1\n        ",
    "describe": {
      "columns": [
        {
          "ordinal": 0,
          "name": "id",
          "type_info": "Int8"
        },
        {
          "ordinal": 1,
          "name": "username",
          "type_info": "Text"
        }
      ],
      "parameters": {
        "Left": [
          "Text"
        ]
      },
      "nullable": [
        false,
        false
      ]
    }
  },
  "138c3297a66107d8428ca10d04f9a4dd75faf9c1d3f84bcedd3b09f55dd84206": {
    "query": "\n            INSERT INTO oauth2_codes\n                (oauth2_session_id, code, code_challenge_method, code_challenge)\n            VALUES\n                ($1, $2, $3, $4)\n            RETURNING\n                id, oauth2_session_id, code, code_challenge_method, code_challenge\n        ",
    "describe": {
      "columns": [
        {
          "ordinal": 0,
          "name": "id",
          "type_info": "Int8"
        },
        {
          "ordinal": 1,
          "name": "oauth2_session_id",
          "type_info": "Int8"
        },
        {
          "ordinal": 2,
          "name": "code",
          "type_info": "Text"
        },
        {
          "ordinal": 3,
          "name": "code_challenge_method",
          "type_info": "Int2"
        },
        {
          "ordinal": 4,
          "name": "code_challenge",
          "type_info": "Text"
        }
      ],
      "parameters": {
        "Left": [
          "Int8",
          "Text",
          "Int2",
          "Text"
        ]
      },
      "nullable": [
        false,
        false,
        false,
        true,
        true
      ]
    }
  },
  "17729fd0354a84e04bfcd525db6575ed2ba75dd730bea3f2be964f4b347dd484": {
    "query": "\n            SELECT code\n            FROM oauth2_codes\n            WHERE oauth2_session_id = $1\n        ",
    "describe": {
      "columns": [
        {
          "ordinal": 0,
          "name": "code",
          "type_info": "Text"
        }
      ],
      "parameters": {
        "Left": [
          "Int8"
        ]
      },
      "nullable": [
        false
      ]
    }
  },
  "307fd9f71e7a94a0a0d9ce523ee9792e127485d0d12480c43f179dd9b75afbab": {
    "query": "\n            INSERT INTO user_sessions (user_id)\n            VALUES ($1)\n            RETURNING id, created_at\n        ",
    "describe": {
      "columns": [
        {
          "ordinal": 0,
          "name": "id",
          "type_info": "Int8"
        },
        {
          "ordinal": 1,
          "name": "created_at",
          "type_info": "Timestamptz"
        }
      ],
      "parameters": {
        "Left": [
          "Int8"
        ]
      },
      "nullable": [
        false,
        false
      ]
    }
  },
  "49888f812910633b87ce65c277f8969377fe264be154d8aa6b33d861d26d2b3b": {
    "query": "\n            SELECT\n                 u.username      AS \"username!\",\n                us.active        AS \"active!\",\n                os.client_id     AS \"client_id!\",\n                os.scope         AS \"scope!\",\n                at.created_at    AS \"created_at!\",\n                at.expires_after AS \"expires_after!\"\n            FROM oauth2_access_tokens at\n            INNER JOIN oauth2_sessions os\n              ON os.id = at.oauth2_session_id\n            INNER JOIN user_sessions us\n              ON us.id = os.user_session_id\n            INNER JOIN users u\n              ON u.id = us.user_id\n            WHERE at.token = $1\n        ",
    "describe": {
      "columns": [
        {
          "ordinal": 0,
          "name": "username!",
          "type_info": "Text"
        },
        {
          "ordinal": 1,
          "name": "active!",
          "type_info": "Bool"
        },
        {
          "ordinal": 2,
          "name": "client_id!",
          "type_info": "Text"
        },
        {
          "ordinal": 3,
          "name": "scope!",
          "type_info": "Text"
        },
        {
          "ordinal": 4,
          "name": "created_at!",
          "type_info": "Timestamptz"
        },
        {
          "ordinal": 5,
          "name": "expires_after!",
          "type_info": "Int4"
        }
      ],
      "parameters": {
        "Left": [
          "Text"
        ]
      },
      "nullable": [
        false,
        false,
        false,
        false,
        false,
        false
      ]
    }
  },
  "562b0d4dcf857e99c20e9288e9c8bd46232290715c0d2459b0398a1c746cf65d": {
    "query": "\n            SELECT\n                rt.id,\n                rt.oauth2_session_id,\n                rt.oauth2_access_token_id,\n                os.client_id AS \"client_id!\",\n                os.scope     AS \"scope!\"\n            FROM oauth2_refresh_tokens rt\n            INNER JOIN oauth2_sessions os\n              ON os.id = rt.oauth2_session_id\n            WHERE rt.token = $1 AND rt.next_token_id IS NULL\n        ",
    "describe": {
      "columns": [
        {
          "ordinal": 0,
          "name": "id",
          "type_info": "Int8"
        },
        {
          "ordinal": 1,
          "name": "oauth2_session_id",
          "type_info": "Int8"
        },
        {
          "ordinal": 2,
          "name": "oauth2_access_token_id",
          "type_info": "Int8"
        },
        {
          "ordinal": 3,
          "name": "client_id!",
          "type_info": "Text"
        },
        {
          "ordinal": 4,
          "name": "scope!",
          "type_info": "Text"
        }
      ],
      "parameters": {
        "Left": [
          "Text"
        ]
      },
      "nullable": [
        false,
        false,
        true,
        false,
        false
      ]
    }
  },
  "5d1a17b2ad6153217551ae31549ad9d62cc39d2f9a4e62a7ccb60fd91e0ac685": {
    "query": "\n            DELETE FROM oauth2_access_tokens\n            WHERE created_at + (expires_after * INTERVAL '1 second') + INTERVAL '15 minutes' < now()\n        ",
    "describe": {
      "columns": [],
      "parameters": {
        "Left": []
      },
      "nullable": []
    }
  },
  "73f2d928f7bf88af79a3685bd6346652b4e4454b0ce75e38343840c9765e3f27": {
    "query": "\n            INSERT INTO oauth2_refresh_tokens\n                (oauth2_session_id, oauth2_access_token_id, token)\n            VALUES\n                ($1, $2, $3)\n            RETURNING\n                id, oauth2_session_id, oauth2_access_token_id, token, next_token_id, \n                created_at, updated_at\n        ",
    "describe": {
      "columns": [
        {
          "ordinal": 0,
          "name": "id",
          "type_info": "Int8"
        },
        {
          "ordinal": 1,
          "name": "oauth2_session_id",
          "type_info": "Int8"
        },
        {
          "ordinal": 2,
          "name": "oauth2_access_token_id",
          "type_info": "Int8"
        },
        {
          "ordinal": 3,
          "name": "token",
          "type_info": "Text"
        },
        {
          "ordinal": 4,
          "name": "next_token_id",
          "type_info": "Int8"
        },
        {
          "ordinal": 5,
          "name": "created_at",
          "type_info": "Timestamptz"
        },
        {
          "ordinal": 6,
          "name": "updated_at",
          "type_info": "Timestamptz"
        }
      ],
      "parameters": {
        "Left": [
          "Int8",
          "Int8",
          "Text"
        ]
      },
      "nullable": [
        false,
        false,
        true,
        false,
        true,
        false,
        false
      ]
    }
  },
  "7fa7d001583e98f5e4626751fa2c8743e7b83a240d1a51de50a7dba95c4e8a6b": {
    "query": "\n            SELECT\n                s.id,\n                u.id as user_id,\n                u.username,\n                s.created_at,\n                a.id as \"last_authentication_id?\",\n                a.created_at as \"last_authd_at?\"\n            FROM user_sessions s\n            INNER JOIN users u \n                ON s.user_id = u.id\n            LEFT JOIN user_session_authentications a\n                ON a.session_id = s.id\n            WHERE s.id = $1 AND s.active\n            ORDER BY a.created_at DESC\n            LIMIT 1\n        ",
    "describe": {
      "columns": [
        {
          "ordinal": 0,
          "name": "id",
          "type_info": "Int8"
        },
        {
          "ordinal": 1,
          "name": "user_id",
          "type_info": "Int8"
        },
        {
          "ordinal": 2,
          "name": "username",
          "type_info": "Text"
        },
        {
          "ordinal": 3,
          "name": "created_at",
          "type_info": "Timestamptz"
        },
        {
          "ordinal": 4,
          "name": "last_authentication_id?",
          "type_info": "Int8"
        },
        {
          "ordinal": 5,
          "name": "last_authd_at?",
          "type_info": "Timestamptz"
        }
      ],
      "parameters": {
        "Left": [
          "Int8"
        ]
      },
      "nullable": [
        false,
        false,
        false,
        false,
        false,
        false
      ]
    }
  },
  "88ac8783bd5881c42eafd9cf87a16fe6031f3153fd6a8618e689694584aeb2de": {
    "query": "\n            DELETE FROM oauth2_access_tokens\n            WHERE id = $1\n        ",
    "describe": {
      "columns": [],
      "parameters": {
        "Left": [
          "Int8"
        ]
      },
      "nullable": []
    }
  },
  "a09dfe1019110f2ec6eba0d35bafa467ab4b7980dd8b556826f03863f8edb0ab": {
    "query": "UPDATE user_sessions SET active = FALSE WHERE id = $1",
    "describe": {
      "columns": [],
      "parameters": {
        "Left": [
          "Int8"
        ]
      },
      "nullable": []
    }
  },
  "a552eee8a8e5ffdee4d4789c634851bd64780dfe730807aac20142d7cd643814": {
    "query": "\n            SELECT u.hashed_password\n            FROM user_sessions s\n            INNER JOIN users u\n               ON u.id = s.user_id \n            WHERE s.id = $1\n        ",
    "describe": {
      "columns": [
        {
          "ordinal": 0,
          "name": "hashed_password",
          "type_info": "Text"
        }
      ],
      "parameters": {
        "Left": [
          "Int8"
        ]
      },
      "nullable": [
        false
      ]
    }
  },
  "a6eb935107d060dd01bf9824ceff87b9ff5492b58cefef002a49f444d3a3daa1": {
    "query": "UPDATE oauth2_sessions SET user_session_id = $1 WHERE id = $2",
    "describe": {
      "columns": [],
      "parameters": {
        "Left": [
          "Int8",
          "Int8"
        ]
      },
      "nullable": []
    }
  },
  "b766b2b41d8770b5bef9928bb3b96abbaf8466b473e12b21f145c015b7cf2f05": {
    "query": "\n            INSERT INTO oauth2_access_tokens\n                (oauth2_session_id, token, expires_after)\n            VALUES\n                ($1, $2, $3)\n            RETURNING\n                id, oauth2_session_id, token, expires_after, created_at\n        ",
    "describe": {
      "columns": [
        {
          "ordinal": 0,
          "name": "id",
          "type_info": "Int8"
        },
        {
          "ordinal": 1,
          "name": "oauth2_session_id",
          "type_info": "Int8"
        },
        {
          "ordinal": 2,
          "name": "token",
          "type_info": "Text"
        },
        {
          "ordinal": 3,
          "name": "expires_after",
          "type_info": "Int4"
        },
        {
          "ordinal": 4,
          "name": "created_at",
          "type_info": "Timestamptz"
        }
      ],
      "parameters": {
        "Left": [
          "Int8",
          "Text",
          "Int4"
        ]
      },
      "nullable": [
        false,
        false,
        false,
        false,
        false
      ]
    }
  },
  "c2c402cfe0adcafa615f14a499caba4c96ca71d9ffb163e1feb05e5d85f3462c": {
    "query": "\n            UPDATE oauth2_refresh_tokens\n            SET next_token_id = $2\n            WHERE id = $1\n        ",
    "describe": {
      "columns": [],
      "parameters": {
        "Left": [
          "Int8",
          "Int8"
        ]
      },
      "nullable": []
    }
  },
  "cacec823f5d4ed886854fbd62b5f5bb2def792582df58c8a047c769d34d9b190": {
    "query": "\n            INSERT INTO oauth2_sessions\n                (user_session_id, client_id, redirect_uri, scope, state, nonce, max_age,\n                 response_type, response_mode)\n            VALUES\n                ($1, $2, $3, $4, $5, $6, $7, $8, $9)\n            RETURNING\n                id, user_session_id, client_id, redirect_uri, scope, state, nonce, max_age,\n                response_type, response_mode, created_at, updated_at\n        ",
    "describe": {
      "columns": [
        {
          "ordinal": 0,
          "name": "id",
          "type_info": "Int8"
        },
        {
          "ordinal": 1,
          "name": "user_session_id",
          "type_info": "Int8"
        },
        {
          "ordinal": 2,
          "name": "client_id",
          "type_info": "Text"
        },
        {
          "ordinal": 3,
          "name": "redirect_uri",
          "type_info": "Text"
        },
        {
          "ordinal": 4,
          "name": "scope",
          "type_info": "Text"
        },
        {
          "ordinal": 5,
          "name": "state",
          "type_info": "Text"
        },
        {
          "ordinal": 6,
          "name": "nonce",
          "type_info": "Text"
        },
        {
          "ordinal": 7,
          "name": "max_age",
          "type_info": "Int4"
        },
        {
          "ordinal": 8,
          "name": "response_type",
          "type_info": "Text"
        },
        {
          "ordinal": 9,
          "name": "response_mode",
          "type_info": "Text"
        },
        {
          "ordinal": 10,
          "name": "created_at",
          "type_info": "Timestamptz"
        },
        {
          "ordinal": 11,
          "name": "updated_at",
          "type_info": "Timestamptz"
        }
      ],
      "parameters": {
        "Left": [
          "Int8",
          "Text",
          "Text",
          "Text",
          "Text",
          "Text",
          "Int4",
          "Text",
          "Text"
        ]
      },
      "nullable": [
        false,
        true,
        false,
        false,
        false,
        true,
        true,
        true,
        false,
        false,
        false,
        false
      ]
    }
  },
  "d9d27eb4a0c11818a636d407438c4bc567a39396e7e236b3e776504417988eab": {
    "query": "\n            INSERT INTO user_session_authentications (session_id)\n            VALUES ($1)\n            RETURNING id, created_at\n        ",
    "describe": {
      "columns": [
        {
          "ordinal": 0,
          "name": "id",
          "type_info": "Int8"
        },
        {
          "ordinal": 1,
          "name": "created_at",
          "type_info": "Timestamptz"
        }
      ],
      "parameters": {
        "Left": [
          "Int8"
        ]
      },
      "nullable": [
        false,
        false
      ]
    }
  },
  "eaddc1e33715ad31b4195fda72dbe870f179dd8da53a88d0543b72a278ed1d3d": {
    "query": "\n            DELETE FROM oauth2_codes\n            WHERE id = $1\n        ",
    "describe": {
      "columns": [],
      "parameters": {
        "Left": [
          "Int8"
        ]
      },
      "nullable": []
    }
  },
  "eb5f772a7387de0dc2f9f660f470476c075da097134a8ded226eb630545c16eb": {
    "query": "\n            SELECT\n                oc.id,\n                oc.code_challenge,\n                oc.code_challenge_method,\n                os.id        AS \"oauth2_session_id!\",\n                os.client_id AS \"client_id!\",\n                os.redirect_uri,\n                os.scope     AS \"scope!\",\n                os.nonce\n            FROM oauth2_codes oc\n            INNER JOIN oauth2_sessions os\n              ON os.id = oc.oauth2_session_id\n            WHERE oc.code = $1\n        ",
    "describe": {
      "columns": [
        {
          "ordinal": 0,
          "name": "id",
          "type_info": "Int8"
        },
        {
          "ordinal": 1,
          "name": "code_challenge",
          "type_info": "Text"
        },
        {
          "ordinal": 2,
          "name": "code_challenge_method",
          "type_info": "Int2"
        },
        {
          "ordinal": 3,
          "name": "oauth2_session_id!",
          "type_info": "Int8"
        },
        {
          "ordinal": 4,
          "name": "client_id!",
          "type_info": "Text"
        },
        {
          "ordinal": 5,
          "name": "redirect_uri",
          "type_info": "Text"
        },
        {
          "ordinal": 6,
          "name": "scope!",
          "type_info": "Text"
        },
        {
          "ordinal": 7,
          "name": "nonce",
          "type_info": "Text"
        }
      ],
      "parameters": {
        "Left": [
          "Text"
        ]
      },
      "nullable": [
        false,
        true,
        true,
        false,
        false,
        false,
        false,
        true
      ]
    }
  },
  "f9a09ff53b6f221649f4f050e3d5ade114f852ddf50a78610a6c0ef0689af681": {
    "query": "\n            INSERT INTO users (username, hashed_password)\n            VALUES ($1, $2)\n            RETURNING id\n        ",
    "describe": {
      "columns": [
        {
          "ordinal": 0,
          "name": "id",
          "type_info": "Int8"
        }
      ],
      "parameters": {
        "Left": [
          "Text",
          "Text"
        ]
      },
      "nullable": [
        false
      ]
    }
  },
  "ff515ebb80ba4af1948472f5c7120a03e25b1ebe42151b8a2036bfbb042f17f6": {
    "query": "\n            SELECT\n                id, user_session_id, client_id, redirect_uri, scope, state, nonce,\n                max_age, response_type, response_mode, created_at, updated_at\n            FROM oauth2_sessions\n            WHERE id = $1\n        ",
    "describe": {
      "columns": [
        {
          "ordinal": 0,
          "name": "id",
          "type_info": "Int8"
        },
        {
          "ordinal": 1,
          "name": "user_session_id",
          "type_info": "Int8"
        },
        {
          "ordinal": 2,
          "name": "client_id",
          "type_info": "Text"
        },
        {
          "ordinal": 3,
          "name": "redirect_uri",
          "type_info": "Text"
        },
        {
          "ordinal": 4,
          "name": "scope",
          "type_info": "Text"
        },
        {
          "ordinal": 5,
          "name": "state",
          "type_info": "Text"
        },
        {
          "ordinal": 6,
          "name": "nonce",
          "type_info": "Text"
        },
        {
          "ordinal": 7,
          "name": "max_age",
          "type_info": "Int4"
        },
        {
          "ordinal": 8,
          "name": "response_type",
          "type_info": "Text"
        },
        {
          "ordinal": 9,
          "name": "response_mode",
          "type_info": "Text"
        },
        {
          "ordinal": 10,
          "name": "created_at",
          "type_info": "Timestamptz"
        },
        {
          "ordinal": 11,
          "name": "updated_at",
          "type_info": "Timestamptz"
        }
      ],
      "parameters": {
        "Left": [
          "Int8"
        ]
      },
      "nullable": [
        false,
        true,
        false,
        false,
        false,
        true,
        true,
        true,
        false,
        false,
        false,
        false
      ]
    }
  }
}