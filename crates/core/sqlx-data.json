{
  "db": "PostgreSQL",
  "037ba804eabd0b4290d87d1de37054f358eb11397d3a8e4b69a81cdce0a178e0": {
    "query": "\n            SELECT id, username\n            FROM users\n            WHERE username = $1\n        ",
    "describe": {
      "columns": [
        {
          "ordinal": 0,
          "name": "id",
          "type_info": "Int8"
        },
        {
          "ordinal": 1,
          "name": "username",
          "type_info": "Text"
        }
      ],
      "parameters": {
        "Left": [
          "Text"
        ]
      },
      "nullable": [
        false,
        false
      ]
    }
  },
  "0c056fcc1a85d00db88034bcc582376cf220e1933d2932e520c44ed9931f5c9d": {
    "query": "\n            INSERT INTO oauth2_refresh_tokens\n                (oauth2_session_id, oauth2_access_token_id, token)\n            VALUES\n                ($1, $2, $3)\n            RETURNING\n                id, created_at\n        ",
    "describe": {
      "columns": [
        {
          "ordinal": 0,
          "name": "id",
          "type_info": "Int8"
        },
        {
          "ordinal": 1,
          "name": "created_at",
          "type_info": "Timestamptz"
        }
      ],
      "parameters": {
        "Left": [
          "Int8",
          "Int8",
          "Text"
        ]
      },
      "nullable": [
        false,
        false
      ]
    }
  },
  "17729fd0354a84e04bfcd525db6575ed2ba75dd730bea3f2be964f4b347dd484": {
    "query": "\n            SELECT code\n            FROM oauth2_codes\n            WHERE oauth2_session_id = $1\n        ",
    "describe": {
      "columns": [
        {
          "ordinal": 0,
          "name": "code",
          "type_info": "Text"
        }
      ],
      "parameters": {
        "Left": [
          "Int8"
        ]
      },
      "nullable": [
        false
      ]
    }
  },
  "282548c5ad51bd95b7d9ad290714bab5860f1e1291021e7d786dc926d12b5dd9": {
    "query": "\n            SELECT\n                oc.id,\n                oc.code_challenge,\n                oc.code_challenge_method,\n                os.id          AS \"oauth2_session_id!\",\n                os.client_id   AS \"client_id!\",\n                os.redirect_uri,\n                os.scope       AS \"scope!\",\n                os.nonce,\n                us.id          AS \"user_session_id?\",\n                us.created_at  AS \"user_session_created_at?\",\n                u.id           AS \"user_id?\",\n                u.username     AS \"user_username?\",\n                usa.id         AS \"user_session_last_authentication_id?\",\n                usa.created_at AS \"user_session_last_authentication_created_at?\"\n            FROM oauth2_codes oc\n            INNER JOIN oauth2_sessions os\n              ON os.id = oc.oauth2_session_id\n            LEFT JOIN user_sessions us\n              ON us.id = os.user_session_id\n            LEFT JOIN user_session_authentications usa\n              ON usa.session_id = us.id\n            LEFT JOIN users u\n              ON u.id = us.user_id\n            WHERE oc.code = $1\n            ORDER BY usa.created_at DESC\n            LIMIT 1\n        ",
    "describe": {
      "columns": [
        {
          "ordinal": 0,
          "name": "id",
          "type_info": "Int8"
        },
        {
          "ordinal": 1,
          "name": "code_challenge",
          "type_info": "Text"
        },
        {
          "ordinal": 2,
          "name": "code_challenge_method",
          "type_info": "Int2"
        },
        {
          "ordinal": 3,
          "name": "oauth2_session_id!",
          "type_info": "Int8"
        },
        {
          "ordinal": 4,
          "name": "client_id!",
          "type_info": "Text"
        },
        {
          "ordinal": 5,
          "name": "redirect_uri",
          "type_info": "Text"
        },
        {
          "ordinal": 6,
          "name": "scope!",
          "type_info": "Text"
        },
        {
          "ordinal": 7,
          "name": "nonce",
          "type_info": "Text"
        },
        {
          "ordinal": 8,
          "name": "user_session_id?",
          "type_info": "Int8"
        },
        {
          "ordinal": 9,
          "name": "user_session_created_at?",
          "type_info": "Timestamptz"
        },
        {
          "ordinal": 10,
          "name": "user_id?",
          "type_info": "Int8"
        },
        {
          "ordinal": 11,
          "name": "user_username?",
          "type_info": "Text"
        },
        {
          "ordinal": 12,
          "name": "user_session_last_authentication_id?",
          "type_info": "Int8"
        },
        {
          "ordinal": 13,
          "name": "user_session_last_authentication_created_at?",
          "type_info": "Timestamptz"
        }
      ],
      "parameters": {
        "Left": [
          "Text"
        ]
      },
      "nullable": [
        false,
        true,
        true,
        false,
        false,
        false,
        false,
        true,
        false,
        false,
        false,
        false,
        false,
        false
      ]
    }
  },
  "307fd9f71e7a94a0a0d9ce523ee9792e127485d0d12480c43f179dd9b75afbab": {
    "query": "\n            INSERT INTO user_sessions (user_id)\n            VALUES ($1)\n            RETURNING id, created_at\n        ",
    "describe": {
      "columns": [
        {
          "ordinal": 0,
          "name": "id",
          "type_info": "Int8"
        },
        {
          "ordinal": 1,
          "name": "created_at",
          "type_info": "Timestamptz"
        }
      ],
      "parameters": {
        "Left": [
          "Int8"
        ]
      },
      "nullable": [
        false,
        false
      ]
    }
  },
  "47a7a8d2ef7db8bb1d41230626ded4e4661d488891fbda9b872c0749a9ba58f4": {
    "query": "\n            INSERT INTO oauth2_codes\n                (oauth2_session_id, code, code_challenge_method, code_challenge)\n            VALUES\n                ($1, $2, $3, $4)\n            RETURNING\n                id\n        ",
    "describe": {
      "columns": [
        {
          "ordinal": 0,
          "name": "id",
          "type_info": "Int8"
        }
      ],
      "parameters": {
        "Left": [
          "Int8",
          "Text",
          "Int2",
          "Text"
        ]
      },
      "nullable": [
        false
      ]
    }
  },
  "59e8a5de682642883a9b9fc1b522736fa4397f0a0c97074f2c8908e5956c0166": {
    "query": "\n            INSERT INTO oauth2_access_tokens\n                (oauth2_session_id, token, expires_after)\n            VALUES\n                ($1, $2, $3)\n            RETURNING\n                id, created_at\n        ",
    "describe": {
      "columns": [
        {
          "ordinal": 0,
          "name": "id",
          "type_info": "Int8"
        },
        {
          "ordinal": 1,
          "name": "created_at",
          "type_info": "Timestamptz"
        }
      ],
      "parameters": {
        "Left": [
          "Int8",
          "Text",
          "Int4"
        ]
      },
      "nullable": [
        false,
        false
      ]
    }
  },
  "5d032f4bdb28534da7cf8e9806442a12708d632b7be28f8b952bd3cb63a8b1af": {
    "query": "\n            SELECT\n                rt.id              AS refresh_token_id,\n                rt.token           AS refresh_token,\n                rt.created_at      AS refresh_token_created_at,\n                at.id              AS \"access_token_id?\",\n                at.token           AS \"access_token?\",\n                at.expires_after   AS \"access_token_expires_after?\",\n                at.created_at      AS \"access_token_created_at?\",\n                os.id              AS \"session_id!\",\n                os.client_id       AS \"client_id!\",\n                os.scope           AS \"scope!\",\n                os.redirect_uri    AS \"redirect_uri!\",\n                os.nonce           AS \"nonce\",\n                us.id              AS \"user_session_id!\",\n                us.created_at      AS \"user_session_created_at!\",\n                 u.id              AS \"user_id!\",\n                 u.username        AS \"user_username!\",\n                usa.id             AS \"user_session_last_authentication_id?\",\n                usa.created_at     AS \"user_session_last_authentication_created_at?\"\n            FROM oauth2_refresh_tokens rt\n            LEFT JOIN oauth2_access_tokens at\n              ON at.id = rt.oauth2_access_token_id\n            INNER JOIN oauth2_sessions os\n              ON os.id = rt.oauth2_session_id\n            INNER JOIN user_sessions us\n              ON us.id = os.user_session_id\n            INNER JOIN users u\n              ON u.id = us.user_id\n            LEFT JOIN user_session_authentications usa\n              ON usa.session_id = us.id\n\n            WHERE rt.token = $1\n              AND rt.next_token_id IS NULL\n              AND us.active\n\n            ORDER BY usa.created_at DESC\n            LIMIT 1\n        ",
    "describe": {
      "columns": [
        {
          "ordinal": 0,
          "name": "refresh_token_id",
          "type_info": "Int8"
        },
        {
          "ordinal": 1,
          "name": "refresh_token",
          "type_info": "Text"
        },
        {
          "ordinal": 2,
          "name": "refresh_token_created_at",
          "type_info": "Timestamptz"
        },
        {
          "ordinal": 3,
          "name": "access_token_id?",
          "type_info": "Int8"
        },
        {
          "ordinal": 4,
          "name": "access_token?",
          "type_info": "Text"
        },
        {
          "ordinal": 5,
          "name": "access_token_expires_after?",
          "type_info": "Int4"
        },
        {
          "ordinal": 6,
          "name": "access_token_created_at?",
          "type_info": "Timestamptz"
        },
        {
          "ordinal": 7,
          "name": "session_id!",
          "type_info": "Int8"
        },
        {
          "ordinal": 8,
          "name": "client_id!",
          "type_info": "Text"
        },
        {
          "ordinal": 9,
          "name": "scope!",
          "type_info": "Text"
        },
        {
          "ordinal": 10,
          "name": "redirect_uri!",
          "type_info": "Text"
        },
        {
          "ordinal": 11,
          "name": "nonce",
          "type_info": "Text"
        },
        {
          "ordinal": 12,
          "name": "user_session_id!",
          "type_info": "Int8"
        },
        {
          "ordinal": 13,
          "name": "user_session_created_at!",
          "type_info": "Timestamptz"
        },
        {
          "ordinal": 14,
          "name": "user_id!",
          "type_info": "Int8"
        },
        {
          "ordinal": 15,
          "name": "user_username!",
          "type_info": "Text"
        },
        {
          "ordinal": 16,
          "name": "user_session_last_authentication_id?",
          "type_info": "Int8"
        },
        {
          "ordinal": 17,
          "name": "user_session_last_authentication_created_at?",
          "type_info": "Timestamptz"
        }
      ],
      "parameters": {
        "Left": [
          "Text"
        ]
      },
      "nullable": [
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        true,
        false,
        false,
        false,
        false,
        false,
        false
      ]
    }
  },
  "5d1a17b2ad6153217551ae31549ad9d62cc39d2f9a4e62a7ccb60fd91e0ac685": {
    "query": "\n            DELETE FROM oauth2_access_tokens\n            WHERE created_at + (expires_after * INTERVAL '1 second') + INTERVAL '15 minutes' < now()\n        ",
    "describe": {
      "columns": [],
      "parameters": {
        "Left": []
      },
      "nullable": []
    }
  },
  "686a796a7de689b73a9377083718c95ac5ac51ce396dcf32e614402051d93e16": {
    "query": "\n            SELECT\n                at.id              AS \"access_token_id\",\n                at.token           AS \"access_token\",\n                at.expires_after   AS \"access_token_expires_after\",\n                at.created_at      AS \"access_token_created_at\",\n                os.id              AS \"session_id!\",\n                os.client_id       AS \"client_id!\",\n                os.scope           AS \"scope!\",\n                os.redirect_uri    AS \"redirect_uri!\",\n                os.nonce           AS \"nonce\",\n                us.id              AS \"user_session_id!\",\n                us.created_at      AS \"user_session_created_at!\",\n                 u.id              AS \"user_id!\",\n                 u.username        AS \"user_username!\",\n                usa.id             AS \"user_session_last_authentication_id?\",\n                usa.created_at     AS \"user_session_last_authentication_created_at?\"\n\n            FROM oauth2_access_tokens at\n            INNER JOIN oauth2_sessions os\n              ON os.id = at.oauth2_session_id\n            INNER JOIN user_sessions us\n              ON us.id = os.user_session_id\n            INNER JOIN users u\n              ON u.id = us.user_id\n            LEFT JOIN user_session_authentications usa\n              ON usa.session_id = us.id\n\n            WHERE at.token = $1\n              AND at.created_at + (at.expires_after * INTERVAL '1 second') >= now()\n              AND us.active\n\n            ORDER BY usa.created_at DESC\n            LIMIT 1\n        ",
    "describe": {
      "columns": [
        {
          "ordinal": 0,
          "name": "access_token_id",
          "type_info": "Int8"
        },
        {
          "ordinal": 1,
          "name": "access_token",
          "type_info": "Text"
        },
        {
          "ordinal": 2,
          "name": "access_token_expires_after",
          "type_info": "Int4"
        },
        {
          "ordinal": 3,
          "name": "access_token_created_at",
          "type_info": "Timestamptz"
        },
        {
          "ordinal": 4,
          "name": "session_id!",
          "type_info": "Int8"
        },
        {
          "ordinal": 5,
          "name": "client_id!",
          "type_info": "Text"
        },
        {
          "ordinal": 6,
          "name": "scope!",
          "type_info": "Text"
        },
        {
          "ordinal": 7,
          "name": "redirect_uri!",
          "type_info": "Text"
        },
        {
          "ordinal": 8,
          "name": "nonce",
          "type_info": "Text"
        },
        {
          "ordinal": 9,
          "name": "user_session_id!",
          "type_info": "Int8"
        },
        {
          "ordinal": 10,
          "name": "user_session_created_at!",
          "type_info": "Timestamptz"
        },
        {
          "ordinal": 11,
          "name": "user_id!",
          "type_info": "Int8"
        },
        {
          "ordinal": 12,
          "name": "user_username!",
          "type_info": "Text"
        },
        {
          "ordinal": 13,
          "name": "user_session_last_authentication_id?",
          "type_info": "Int8"
        },
        {
          "ordinal": 14,
          "name": "user_session_last_authentication_created_at?",
          "type_info": "Timestamptz"
        }
      ],
      "parameters": {
        "Left": [
          "Text"
        ]
      },
      "nullable": [
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        true,
        false,
        false,
        false,
        false,
        false,
        false
      ]
    }
  },
  "7fa7d001583e98f5e4626751fa2c8743e7b83a240d1a51de50a7dba95c4e8a6b": {
    "query": "\n            SELECT\n                s.id,\n                u.id as user_id,\n                u.username,\n                s.created_at,\n                a.id as \"last_authentication_id?\",\n                a.created_at as \"last_authd_at?\"\n            FROM user_sessions s\n            INNER JOIN users u \n                ON s.user_id = u.id\n            LEFT JOIN user_session_authentications a\n                ON a.session_id = s.id\n            WHERE s.id = $1 AND s.active\n            ORDER BY a.created_at DESC\n            LIMIT 1\n        ",
    "describe": {
      "columns": [
        {
          "ordinal": 0,
          "name": "id",
          "type_info": "Int8"
        },
        {
          "ordinal": 1,
          "name": "user_id",
          "type_info": "Int8"
        },
        {
          "ordinal": 2,
          "name": "username",
          "type_info": "Text"
        },
        {
          "ordinal": 3,
          "name": "created_at",
          "type_info": "Timestamptz"
        },
        {
          "ordinal": 4,
          "name": "last_authentication_id?",
          "type_info": "Int8"
        },
        {
          "ordinal": 5,
          "name": "last_authd_at?",
          "type_info": "Timestamptz"
        }
      ],
      "parameters": {
        "Left": [
          "Int8"
        ]
      },
      "nullable": [
        false,
        false,
        false,
        false,
        false,
        false
      ]
    }
  },
  "88ac8783bd5881c42eafd9cf87a16fe6031f3153fd6a8618e689694584aeb2de": {
    "query": "\n            DELETE FROM oauth2_access_tokens\n            WHERE id = $1\n        ",
    "describe": {
      "columns": [],
      "parameters": {
        "Left": [
          "Int8"
        ]
      },
      "nullable": []
    }
  },
  "a09dfe1019110f2ec6eba0d35bafa467ab4b7980dd8b556826f03863f8edb0ab": {
    "query": "UPDATE user_sessions SET active = FALSE WHERE id = $1",
    "describe": {
      "columns": [],
      "parameters": {
        "Left": [
          "Int8"
        ]
      },
      "nullable": []
    }
  },
  "a552eee8a8e5ffdee4d4789c634851bd64780dfe730807aac20142d7cd643814": {
    "query": "\n            SELECT u.hashed_password\n            FROM user_sessions s\n            INNER JOIN users u\n               ON u.id = s.user_id \n            WHERE s.id = $1\n        ",
    "describe": {
      "columns": [
        {
          "ordinal": 0,
          "name": "hashed_password",
          "type_info": "Text"
        }
      ],
      "parameters": {
        "Left": [
          "Int8"
        ]
      },
      "nullable": [
        false
      ]
    }
  },
  "a6eb935107d060dd01bf9824ceff87b9ff5492b58cefef002a49f444d3a3daa1": {
    "query": "UPDATE oauth2_sessions SET user_session_id = $1 WHERE id = $2",
    "describe": {
      "columns": [],
      "parameters": {
        "Left": [
          "Int8",
          "Int8"
        ]
      },
      "nullable": []
    }
  },
  "c2c402cfe0adcafa615f14a499caba4c96ca71d9ffb163e1feb05e5d85f3462c": {
    "query": "\n            UPDATE oauth2_refresh_tokens\n            SET next_token_id = $2\n            WHERE id = $1\n        ",
    "describe": {
      "columns": [],
      "parameters": {
        "Left": [
          "Int8",
          "Int8"
        ]
      },
      "nullable": []
    }
  },
  "cacec823f5d4ed886854fbd62b5f5bb2def792582df58c8a047c769d34d9b190": {
    "query": "\n            INSERT INTO oauth2_sessions\n                (user_session_id, client_id, redirect_uri, scope, state, nonce, max_age,\n                 response_type, response_mode)\n            VALUES\n                ($1, $2, $3, $4, $5, $6, $7, $8, $9)\n            RETURNING\n                id, user_session_id, client_id, redirect_uri, scope, state, nonce, max_age,\n                response_type, response_mode, created_at, updated_at\n        ",
    "describe": {
      "columns": [
        {
          "ordinal": 0,
          "name": "id",
          "type_info": "Int8"
        },
        {
          "ordinal": 1,
          "name": "user_session_id",
          "type_info": "Int8"
        },
        {
          "ordinal": 2,
          "name": "client_id",
          "type_info": "Text"
        },
        {
          "ordinal": 3,
          "name": "redirect_uri",
          "type_info": "Text"
        },
        {
          "ordinal": 4,
          "name": "scope",
          "type_info": "Text"
        },
        {
          "ordinal": 5,
          "name": "state",
          "type_info": "Text"
        },
        {
          "ordinal": 6,
          "name": "nonce",
          "type_info": "Text"
        },
        {
          "ordinal": 7,
          "name": "max_age",
          "type_info": "Int4"
        },
        {
          "ordinal": 8,
          "name": "response_type",
          "type_info": "Text"
        },
        {
          "ordinal": 9,
          "name": "response_mode",
          "type_info": "Text"
        },
        {
          "ordinal": 10,
          "name": "created_at",
          "type_info": "Timestamptz"
        },
        {
          "ordinal": 11,
          "name": "updated_at",
          "type_info": "Timestamptz"
        }
      ],
      "parameters": {
        "Left": [
          "Int8",
          "Text",
          "Text",
          "Text",
          "Text",
          "Text",
          "Int4",
          "Text",
          "Text"
        ]
      },
      "nullable": [
        false,
        true,
        false,
        false,
        false,
        true,
        true,
        true,
        false,
        false,
        false,
        false
      ]
    }
  },
  "d9d27eb4a0c11818a636d407438c4bc567a39396e7e236b3e776504417988eab": {
    "query": "\n            INSERT INTO user_session_authentications (session_id)\n            VALUES ($1)\n            RETURNING id, created_at\n        ",
    "describe": {
      "columns": [
        {
          "ordinal": 0,
          "name": "id",
          "type_info": "Int8"
        },
        {
          "ordinal": 1,
          "name": "created_at",
          "type_info": "Timestamptz"
        }
      ],
      "parameters": {
        "Left": [
          "Int8"
        ]
      },
      "nullable": [
        false,
        false
      ]
    }
  },
  "eaddc1e33715ad31b4195fda72dbe870f179dd8da53a88d0543b72a278ed1d3d": {
    "query": "\n            DELETE FROM oauth2_codes\n            WHERE id = $1\n        ",
    "describe": {
      "columns": [],
      "parameters": {
        "Left": [
          "Int8"
        ]
      },
      "nullable": []
    }
  },
  "f9a09ff53b6f221649f4f050e3d5ade114f852ddf50a78610a6c0ef0689af681": {
    "query": "\n            INSERT INTO users (username, hashed_password)\n            VALUES ($1, $2)\n            RETURNING id\n        ",
    "describe": {
      "columns": [
        {
          "ordinal": 0,
          "name": "id",
          "type_info": "Int8"
        }
      ],
      "parameters": {
        "Left": [
          "Text",
          "Text"
        ]
      },
      "nullable": [
        false
      ]
    }
  },
  "ff515ebb80ba4af1948472f5c7120a03e25b1ebe42151b8a2036bfbb042f17f6": {
    "query": "\n            SELECT\n                id, user_session_id, client_id, redirect_uri, scope, state, nonce,\n                max_age, response_type, response_mode, created_at, updated_at\n            FROM oauth2_sessions\n            WHERE id = $1\n        ",
    "describe": {
      "columns": [
        {
          "ordinal": 0,
          "name": "id",
          "type_info": "Int8"
        },
        {
          "ordinal": 1,
          "name": "user_session_id",
          "type_info": "Int8"
        },
        {
          "ordinal": 2,
          "name": "client_id",
          "type_info": "Text"
        },
        {
          "ordinal": 3,
          "name": "redirect_uri",
          "type_info": "Text"
        },
        {
          "ordinal": 4,
          "name": "scope",
          "type_info": "Text"
        },
        {
          "ordinal": 5,
          "name": "state",
          "type_info": "Text"
        },
        {
          "ordinal": 6,
          "name": "nonce",
          "type_info": "Text"
        },
        {
          "ordinal": 7,
          "name": "max_age",
          "type_info": "Int4"
        },
        {
          "ordinal": 8,
          "name": "response_type",
          "type_info": "Text"
        },
        {
          "ordinal": 9,
          "name": "response_mode",
          "type_info": "Text"
        },
        {
          "ordinal": 10,
          "name": "created_at",
          "type_info": "Timestamptz"
        },
        {
          "ordinal": 11,
          "name": "updated_at",
          "type_info": "Timestamptz"
        }
      ],
      "parameters": {
        "Left": [
          "Int8"
        ]
      },
      "nullable": [
        false,
        true,
        false,
        false,
        false,
        true,
        true,
        true,
        false,
        false,
        false,
        false
      ]
    }
  }
}